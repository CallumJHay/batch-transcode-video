#!/usr/bin/env node

process.title = 'batch-transcode-video';

'use strict';

var _minimist = require('minimist');

var _minimist2 = _interopRequireDefault(_minimist);

var _indexCli = require('../dist/index-cli.js');

var _indexCli2 = _interopRequireDefault(_indexCli);

var _defaultOptions = require('../dist/lib/default-options.js');

var _defaultOptions2 = _interopRequireDefault(_defaultOptions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var VERSION = '1.0.5';
var UNKNOWN_MESSAGE = 'If you would like to supply custom options to\n transcode-video then put them at end of the command\n after a double dash "--". For example to pass the\n "--dry-run" command to transcode-video:'.replace(/\n+/g, '');
var defs = {
  '--': true,
  alias: {
    input: 'i',
    output: 'o',
    mask: 'm',
    help: 'h',
    version: 'v'
  },
  boolean: ['debug', 'quiet', 'flatten', 'diff', 'help', 'force', 'version'],
  string: ['input', 'output', 'mask'],
  default: _defaultOptions2.default,
  unknown: function unknown(arg) {
    console.log('ERROR:\tUnrecognized argument ' + arg + ' provided.');
    console.log(UNKNOWN_MESSAGE);
    console.log('\nbatch-transcode-video --input my_videos/ -- --dry-run');
    process.exit(1);
  }
};

var options = (0, _minimist2.default)(process.argv.slice(2), defs);

if (options['version'] === true) {
  console.log('batch-transcode-video v' + VERSION);
  process.exit(0);
}

var transcodeOptions = [];
if (options['--'].length) {
  transcodeOptions = options['--'].slice(0);
  delete options['--'];
}

new _indexCli2.default(options, transcodeOptions).cli();
